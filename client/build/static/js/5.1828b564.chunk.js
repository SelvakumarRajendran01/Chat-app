(window.webpackJsonpcreative=window.webpackJsonpcreative||[]).push([[5],{105:function(e,t){},134:function(e,t,a){},135:function(e,t,a){},140:function(e,t,a){},168:function(e,t,a){},171:function(e,t,a){},172:function(e,t,a){},173:function(e,t,a){},174:function(e,t,a){},175:function(e,t,a){},176:function(e,t,a){},182:function(e,t,a){},221:function(e,t,a){"use strict";a.r(t);var r=a(0),n=a.n(r),c=a(218),o=a(187),s=a(13);a(59);var i=a(71),l=(a(134),a(201)),u=a(205),d=a(212),m=a(213);var p=e=>{const{contentType:t,arrayBuffer:a,containerProps:r,...c}=e,o=btoa(new Uint8Array(a).reduce((e,t)=>e+String.fromCharCode(t),""));return n.a.createElement(n.a.Fragment,null,n.a.createElement("img",Object.assign({},c,{src:`data:${t};base64,${o}`})))};a(135);var h=e=>{const{name:t,profileImage:a,lastMessage:c,timeStamp:o,isSelected:s,style:i,time:d,...m}=e,[h,b]=Object(r.useState)(!1),g=Object(l.a)(),{background:_,text:y}=(new Date(d),g.palette);return n.a.createElement("div",Object.assign({className:"chatSnippet",style:h?{background:_.chatListBackgroundHover,...i}:{...i}},m,{onMouseEnter:e=>b(!0),onMouseLeave:e=>b(!1)}),a.contentType?n.a.createElement(p,{className:"chatSnippet__image",contentType:a.contentType,arrayBuffer:a.data.data}):n.a.createElement(u.a,{style:{height:"50px",width:"50px"}}),n.a.createElement("div",{className:"chatSnippet__body"},n.a.createElement("span",{className:"chatSnippet__body__name"},t),n.a.createElement("span",{className:"chatSnippet__body__lm"},c),n.a.createElement("span",{className:"chatSnippet__body__time"},d)))},b=a(220),g=a(224),_=a(222),y=a(53),f=(a(140),a(60)),E=(a(168),a(58)),k=a(206),j=a(207);var v=e=>{let{searchInput:t,setSearchInput:a,placeHolder:c}=e;const[o,s]=Object(r.useState)(!1),i=Object(E.b)(),u=Object(E.b)(),d=Object(l.a)(),{background:m,icon:p}=d.palette;Object(r.useEffect)(()=>{o&&h()},[o]);const h=async()=>{u.start({width:"100%",height:"95%",borderRadius:"0px"}),await i.start({rotate:90})},b=async()=>(u.start({height:"70%",width:"95%",borderRadius:"18px"}),await i.start({rotate:0,opacity:.5,transition:{duration:.2}}));return n.a.createElement("div",{className:"sidebar__search-input-wrapper",style:{background:m.searchContainerBackground}},o?n.a.createElement(E.a.span,{animate:i,className:"sidebar__search-input-wrapper__iconWrapper"},n.a.createElement(k.a,{className:"sidebar__search-input-wrapper__arrow",style:{color:p.arrowIconColor,cursor:"pointer"},onClick:async e=>{await b(),a(""),s(!1)}})):n.a.createElement(E.a.span,{initial:{opacity:0},animate:{opacity:1},className:"sidebar__search-input-wrapper__iconWrapper"},n.a.createElement(j.a,{style:{color:p.iconColor,cursor:"pointer"}})),n.a.createElement(E.a.input,{className:"sidebar__search-input",style:{background:m.searchInputBackground},placeholder:o?"":c,value:t,onFocus:e=>s(!0),onChange:e=>a(e.target.value),animate:u,onBlur:async e=>{t||(await b(),s(!1))}}))},w=a(56),O=a(169),N=a.n(O);var B=e=>{const[t,a]=Object(r.useState)(!0),[c,o]=Object(r.useState)(""),[i,u]=Object(r.useState)(""),d=Object(s.b)(),{searchedUsers:m,id:h,friendList:E,email:k,isSearchingUsers:j}=Object(s.c)(e=>e.user),O=Object(l.a)();Object(r.useEffect)(()=>{d(Object(y.e)())},[]);const{background:B,text:C}=O.palette,S=e=>{o(e),d(Object(y.e)(e))};return n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a.Header,{closeButton:!0,className:"addUser"},n.a.createElement(g.a,{className:"mr-2",onClick:e=>a(!0),variant:t?"primary":"secondary"},"Search By Name"),n.a.createElement(g.a,{variant:t?"secondary":"primary",onClick:e=>a(!1)},"Add By Email")),n.a.createElement(b.a.Body,{style:{height:"500px",overflow:"auto",position:"relative"}},t?n.a.createElement(n.a.Fragment,null,n.a.createElement(v,{searchInput:c,setSearchInput:S,placeHolder:"Search for user by name"}),j?n.a.createElement("div",{className:"addUser__loader",style:{borderTopColor:B.buttonBackground}}):n.a.createElement(n.a.Fragment,null),j||n.a.createElement(_.a,null,Array.isArray(m)&&m.map(e=>{const t=e._id;return h===t?n.a.createElement(n.a.Fragment,null):n.a.createElement("div",{className:"addUser__users-list"},n.a.createElement(p,{arrayBuffer:e.profileImage.data.data,contentType:e.profileImage.contentType,className:"addUser__users-list__img"}),n.a.createElement("h5",{className:"addUser__users-list__name"},e.displayName),n.a.createElement(g.a,{className:"addUser__users-list__button",variant:E[t]?"secondary":"success",disabled:E[t],onClick:t=>((e,t)=>{Object(f.a)(h,t)})(0,e._id)},E[t]?"added":"add"))}))):n.a.createElement("div",{style:{display:"flex",flexDirection:"column",alignContent:"center",justifyContent:"flex-start"}},n.a.createElement(v,{searchInput:i,setSearchInput:u,placeHolder:"Add user by email"}),n.a.createElement(g.a,{onClick:e=>(async e=>{if(k!==e)try{const{userId:t}=await Object(w.b)(e);Object(f.a)(h,t),N.a.fire("Friend request sent.")}catch(t){N.a.fire("User not found.")}})(i),style:{display:"inline"}},"Add user by email"))))},C=a(63),S=(a(171),a(208));var x=e=>{const{openDrawer:t,handleCloseDrawer:a}=e,{chatRooms:c,id:o,status:i}=Object(s.c)(e=>e.user),d=Object(E.b)(),[m,h]=Object(r.useState)(-1),[b,g]=Object(r.useState)(-1),y=Object(s.b)(),f=Object(l.a)(),[k,j]=Object(r.useState)(""),{background:w,text:O}=f.palette;Object(r.useEffect)(()=>{t?(async()=>{await d.start({x:0,transition:{duration:"0.5"}})})():(async()=>{await d.start({x:-1e3,transition:{duration:"0.5"}})})()},[t]);return n.a.createElement(E.a.div,{className:"startConversationDrawer",animate:d,initial:{x:-1e3},style:{background:w.siderBarChatListBackground}},n.a.createElement("div",{className:"startConversationDrawer__header",style:{background:w.headerColorLight,color:w.siderBarChatListBackground}},n.a.createElement(S.a,{onClick:e=>a()}),n.a.createElement("h4",null,"New chat")),n.a.createElement("div",{className:"startConversationDrawer__body"},n.a.createElement(v,{searchInput:k,setSearchInput:j,placeHolder:"Search user.."}),n.a.createElement("div",{className:"startConversationDrawer__body__chatList"},n.a.createElement(_.a,null,c.map((e,t)=>{if(!e.chats)return n.a.createElement(n.a.Fragment,null);if(0===e.chats.length){const r=o===e.users[0]._id?e.users[1]:e.users[0];return k&&!r.displayName.match(new RegExp(""+k,"i"))?n.a.createElement(n.a.Fragment,null):n.a.createElement(_.a.Item,{className:"startConversationDrawer__body__user-info-wrapper",onClick:t=>((e,t)=>{e.preventDefault(),y(Object(C.b)(t)),a()})(t,e._id),style:b===t?{background:w.chatListBackgroundHover}:{},onMouseEnter:e=>g(t),onMouseLeave:e=>g(-1)},n.a.createElement("div",{className:"startConversationDrawer__body__user-info"},r.profileImage.contentType?n.a.createElement(p,{className:"profileImage",arrayBuffer:r.profileImage.data.data,contentType:r.profileImage.contentType}):n.a.createElement(u.a,{style:{height:"50px",width:"50px"}}),n.a.createElement("div",{className:"startConversationDrawer__body__user-info__name-and-status"},n.a.createElement("h5",null,r.displayName),n.a.createElement("p",null,i))))}return n.a.createElement(n.a.Fragment,null)})))))},I=a(2);a(172);var D=e=>{const{isOpen:t,...a}=e,c=Object(l.a)(),{background:o,icon:i}=c.palette,u=Object(E.b)(),d=Object(s.b)(),m=Object(I.g)();Object(r.useEffect)(()=>{t?p():h()},[t]);const p=async()=>{await u.start({opacity:1,scale:1})},h=async()=>{await u.start({opacity:0,scale:0})};return n.a.createElement(E.a.div,Object.assign({initial:{scale:0,opacity:0},animate:u,className:"SidebarDropdown__container",style:{background:o.siderBarChatListBackground}},a),n.a.createElement("span",{className:"SidebarDropdown__container__item"},"Settings"),n.a.createElement("span",{className:"SidebarDropdown__container__item",onClick:()=>{d(Object(y.g)()),m.push("/signinsignup")}},"Log out"))},T=(a(173),a(209)),R=a(210),L=a(211);const F=e=>{const{label:t,handleSubmit:a,value:c,isDisable:o,showNoOfCharLeft:s,maxChar:i,...u}=e,d=Object(l.a)(),[m,p]=Object(r.useState)(c),[h,b]=Object(r.useState)(!1),{background:g,icon:_}=d.palette,y=Object(r.useRef)(null);return Object(r.useEffect)(()=>{h&&y.current.focus()}),Object(r.useEffect)(()=>{o&&b(!1)},[o]),Object(r.useEffect)(()=>{p(c)},[c]),n.a.createElement("div",Object.assign({className:"inputBox"},u,{style:{...u.style,background:g.siderBarChatListBackground}}),n.a.createElement("span",{style:{color:g.headerColorLight}},t),n.a.createElement("div",{className:"inputBox__outer",style:h?{borderBottom:"2px solid "+g.headerDarkBackground}:{}},n.a.createElement("input",{className:"inputBox__input",readOnly:!h,value:m,onChange:e=>p(e.target.value),ref:y,maxLength:i||120}),h?n.a.createElement(n.a.Fragment,null,s&&n.a.createElement("span",{className:"inputBox__char-left"},i-m.length),n.a.createElement(T.a,{className:"inputBox__icon",onClick:e=>{a(m),b(!1)}})):n.a.createElement(R.a,{className:"inputBox__icon",onClick:e=>b(!0)})))};var P=e=>{const{openDrawer:t,handleCloseDrawer:a}=e,[c,o]=Object(r.useState)(!1),[i,d]=Object(r.useState)(null),{profileImage:m,displayName:h,status:b}=Object(s.c)(e=>e.user),g=Object(E.b)(),_=Object(E.b)(),f=Object(E.b)(),k=Object(r.useRef)(null),j=Object(E.b)(),[v,w]=Object(r.useState)(null),O=Object(s.b)(),N=Object(l.a)(),[B,C]=Object(r.useState)(m),x=Object(r.useRef)(null),{background:I,icon:D}=N.palette;Object(r.useEffect)(()=>{i?(async()=>{await j.set({scale:0,opacity:0}),await j.start({scale:1,opacity:1})})():(async()=>{await j.start({scale:0,opacity:0})})()},[i]),Object(r.useEffect)(()=>{const e=e=>{k.current&&!k.current.contains(e.target)&&d(null)};document.addEventListener("click",e);return()=>{document.removeEventListener("click",e)}},[]);Object(r.useEffect)(()=>{t?(async()=>{await g.start({x:0,transition:{duration:"0.5"}}),await _.start({height:"250px",width:"250px",transition:{duration:"0.2"},y:0}),await f.start({y:0,opacity:1,transition:{duration:"0.5"}})})():(async()=>{await g.start({x:-1e3,transition:{duration:"0.5"}}),_.start({height:"0px",width:"0px",y:125,transition:{duration:0}}),f.start({y:-50,opacity:0})})()},[t]);return n.a.createElement(E.a.div,{className:"profileDrawer",animate:g,initial:{x:-1e3}},n.a.createElement("input",{type:"file",name:"profileImageInput",accept:"image/*",style:{display:"none"},ref:x,onChange:e=>{if(e.target.files[0]){const t=new FileReader,a=e.target.files[0],r={contentType:a.type};t.onload=e=>{const t=e.target.result;r.data={type:"Buffer",data:t},C(r)},t.readAsArrayBuffer(a);const n=new FormData;n.append("profileImage",e.target.files[0]),O(Object(y.j)("photo",n))}}}),n.a.createElement("div",{className:"profileDrawer__header",style:{background:I.headerColorLight,color:I.siderBarChatListBackground}},n.a.createElement(S.a,{onClick:e=>a()}),n.a.createElement("h4",null,"Profile")),n.a.createElement("div",{className:"profileDrawer__body",style:{background:I.profileDrawerBackground}},n.a.createElement(E.a.div,{className:"profileDrawer__body__image-container",initial:{height:"0px",width:"0px"},animate:_,onMouseEnter:e=>o(!0),onMouseLeave:e=>o(!1),onClick:e=>d((e=>{e.currentTarget.getBoundingClientRect();return[e.clientX,e.clientY]})(e)),ref:k},(!m||c||i)&&n.a.createElement("div",{className:"profileDrawer__body__image-container__upload-img",style:{background:I.uploadPicOverlayBackground}},n.a.createElement(L.a,{style:{height:"25px",width:"25px",color:I.siderBarChatListBackground}}),n.a.createElement("div",{className:"profileDrawer__body__image-container__upload-img__text",style:{color:I.siderBarChatListBackground}},!m&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",null,"Add Profile"),n.a.createElement("span",{style:{alignSelf:"center"}},"Photo")),(c||i)&&m&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{style:{alignSelf:"center"}},"Change"),n.a.createElement("span",{style:{alignSelf:"center"}},"Profile Picture")))),B.contentType?n.a.createElement(p,{arrayBuffer:B.data.data,contentType:B.contentType,className:"profileDrawer__body__profileImage",style:{cursor:"pointer"}}):n.a.createElement(u.a,{color:"red",style:{cursor:"pointer"}})),i&&n.a.createElement(E.a.div,{className:"profileDrawer__body__image-container__upload-img__menu",style:{left:i[0]+"px",top:i[1]+"px",height:"90px",width:"150px",background:I.siderBarChatListBackground},initial:{opacity:0,scale:0},animate:j},n.a.createElement("div",{className:"pb-2 pt-3 pl-3",style:{cursor:"pointer"},onClick:e=>{x.current.click()}}," ","Upload Photo"),n.a.createElement("div",{className:"pb-2 pt-3 pl-3",style:{cursor:"pointer"},onClick:e=>{O(Object(y.j)("photo",{removeProfileImage:!0})),C({contentType:""})}},"Remove Photo")),n.a.createElement(E.a.div,{className:"profileDrawer__body__form",initial:{opacity:0,y:-50},animate:f},n.a.createElement(F,{label:"Your Name",value:h,handleSubmit:e=>{e!==h&&O(Object(y.j)("display-name",{displayName:e}))},isDisable:!t,showNoOfCharLeft:!0,maxChar:25}),n.a.createElement(F,{label:"About",value:b,handleSubmit:e=>{e!==b&&O(Object(y.j)("status",{status:e}))},isDisable:!t}))))};const M={0:"Sunday",1:"Monday",2:"Tuesday",3:"Wednesday",4:"Thursday",5:"Friday",6:"Saturday"};var U=(e,t)=>{(new Date).getDay();switch(!0){case 1===e:return"Today";case 2===e:return"Yesterday";case e>=3&&e<=6:return M[t.getDay()];case e>6:return`${t.getDate()}/${t.getMonth()+1}/${t.getYear()+1900} `}};var H=e=>{const[t,a]=Object(r.useState)(!1),[c,o]=Object(r.useState)(!1),[i,_]=Object(r.useState)(!1),[y,f]=Object(r.useState)(!1),[E,k]=Object(r.useState)(0),[j,w]=Object(r.useState)(!1),O=Object(r.useRef)(),[N,S]=Object(r.useState)(""),I=Object(l.a)(),T=Object(s.b)(),{chatRooms:R,id:L,profileImage:F}=Object(s.c)(e=>e.user),M=Object(s.c)(e=>e.room.currentChatRoomId);Object(r.useEffect)(()=>{const e=e=>{console.log(O.current),O.current&&!O.current.contains(e.target)&&f(!1)};document.addEventListener("click",e);return()=>{document.removeEventListener("click",e)}}),Object(r.useEffect)(()=>{let e=0;for(let t=0;t<R.length&&!(e>100);t++)0===R[t].chats.length&&e++;k(e)},[R]);const{background:H,text:A,icon:W}=I.palette;return n.a.createElement(n.a.Fragment,null,n.a.createElement(b.a,{show:t,onHide:()=>a(!1),size:"lg",centered:!0},n.a.createElement(B,null)),n.a.createElement("div",{className:"sideBar"},n.a.createElement(x,{openDrawer:c,handleCloseDrawer:e=>{o(!1)}}),n.a.createElement(P,{openDrawer:i,handleCloseDrawer:e=>_(!1)}),n.a.createElement("div",{className:"sideBar__header",style:{background:H.headerBackground}},n.a.createElement("div",{className:"sideBar__header__left"},F.contentType?n.a.createElement(p,{arrayBuffer:F.data.data,contentType:F.contentType,className:"chatSnippet__image",style:{cursor:"pointer"},onClick:e=>_(!0)}):n.a.createElement(u.a,{style:{cursor:"pointer"},onClick:e=>_(!0)})),n.a.createElement("div",{className:"sideBar__header__right"},n.a.createElement("div",{className:"sideBar__header__right__container"},n.a.createElement("span",{className:"sideBar__header__right__container__num",style:{color:W.addedUserIconNumber}},E||""),n.a.createElement(d.a,{style:{color:W.iconColor},onClick:e=>o(!0)})),n.a.createElement("div",{className:"sidebar__menu-icon-wrapper"},n.a.createElement(m.a,{onClick:e=>f(!0),ref:O,style:{color:W.iconColor}}),n.a.createElement(D,{isOpen:y})))),n.a.createElement(v,{searchInput:N,setSearchInput:S,placeHolder:"Search user.."}),n.a.createElement("div",{className:"sideBar__chats",style:{background:H.siderBarChatListBackground}},(()=>{let e=[];return R.forEach((t,a)=>{if(!t.chats)return n.a.createElement(n.a.Fragment,null);if(0!==t.chats.length){const a=t.users[0]._id===L?t.users[1]:t.users[0];if(N&&!a.displayName.match(new RegExp(""+N,"i")))return n.a.createElement(n.a.Fragment,null);let r=new Date(t.chats[t.chats.length-1].time);const c=Math.abs(new Date-r),o=Math.ceil(c/864e5);let s=U(o,r);"Today"===s&&(s=`${r.getHours()}:${r.getMinutes()}`),e.push(n.a.createElement(h,{name:a.displayName,profileImage:a.profileImage,lastMessage:t.chats[t.chats.length-1].text,time:s,onClick:e=>T(Object(C.b)(t._id)),style:t._id===M?{background:H.chatListBackgroundActive}:{}}))}}),e})()),n.a.createElement(g.a,{className:"sideBar__add__button",onClick:e=>a(!0),onMouseEnter:e=>w(!0),onMouseLeave:e=>w(!1),style:{background:j?H.buttonBackgroundHover:H.buttonBackground,color:A.inverseStrong,height:"50px"}},"+")))},A=(a(174),a(214)),W=a(215),$=a(216);var z=e=>{const t=Object(l.a)(),{background:a,text:c}=t.palette,o=t.palette.icon.hederIconColor,[i,d]=Object(r.useState)(""),h=Object(s.c)(e=>e.room.currentChatRoomId),[b,g]=Object(r.useState)(0),_=Object(s.c)(e=>e.user.chatRooms.find(e=>e._id===h)),E=Object(s.c)(e=>e.user),k=Object(r.useRef)(null),v=Object(s.c)(e=>e.user.id),w=Object(s.b)();if(Object(r.useEffect)(()=>{_&&_.chats.length!==b&&g(_.chats.length)}),Object(r.useEffect)(()=>{k.current&&k.current.scrollIntoView()},[b,_]),!_)return n.a.createElement(n.a.Fragment,null);const O=_.users[0]._id===v?_.users[1]:_.users[0],{displayName:N,profileImage:B}=O;return n.a.createElement("div",{className:"chatRoom"},n.a.createElement("div",{className:"chatRoom__header",style:{background:a.headerBackground}},n.a.createElement("div",{className:"chatRoom__header__left"},B.contentType?n.a.createElement(p,{className:"chatRoom__img",contentType:B.contentType,arrayBuffer:B.data.data}):n.a.createElement(u.a,{style:{height:"50px",width:"50px"}}),n.a.createElement("div",{className:"chatRoom__header__left__info"},n.a.createElement("span",{className:"chatRoom__header__left__info__name",style:{color:c.primaryStrong}},N),n.a.createElement("span",null,"online"))),n.a.createElement("div",{className:"chatRoom__header__right"},n.a.createElement(j.a,{style:{color:o}}),n.a.createElement(m.a,{style:{color:o}}))),n.a.createElement("div",{className:"chatRoom__body",style:{backgroundImage:"url(./images/chat-background-1.jpg)"}},n.a.createElement("div",{className:"chatRoom__body__chats"},(()=>{if(0==_.chats.length)return n.a.createElement(n.a.Fragment,null);console.log(_.chats,E,"this is ChatComponents");let e="";return _.chats.map(t=>{const r=new Date(t.time),c=Math.abs(new Date-r),o=Math.ceil(c/864e5),s=U(o,r),i=((e,t)=>e===t?null:n.a.createElement("div",{className:"chatRoom__body__chats__day",style:{background:a.systemMessageBackground}},e))(s,e);return i&&(e=s),v===t.sender?n.a.createElement(n.a.Fragment,null,i,n.a.createElement("div",{className:"chatRoom__body__chats__chat_sender chatRoom__body__chats__chat-user",style:{background:a.outGoingBackground},key:t._id},n.a.createElement("span",{className:"chatRoom__body__chats__chat__text chatRoom__body__chats__chat-user__text"},t.text),n.a.createElement("span",{className:"chatRoom__body__chats__chat-user__time"},r.getHours()+"."+r.getMinutes()))):n.a.createElement(n.a.Fragment,null,i,n.a.createElement("div",{style:{display:"flex",gap:"10px",flexDirection:"row",alignItems:"center"}},B.contentType?n.a.createElement(p,{className:"chatRoom__img",contentType:B.contentType,arrayBuffer:B.data.data,style:{height:"30px",width:"30px"}}):n.a.createElement(u.a,{style:{height:"50px",width:"50px"}}),n.a.createElement("div",{className:"chatRoom__body__chats__chat chatRoom__body__chats__chat-other-user",style:{background:a.incommingBackground}},n.a.createElement("span",{className:"chatRoom__body__chats__chat__text chatRoom__body__chats__chat-other-user__text"},t.text),n.a.createElement("span",{className:"chatRoom__body__chats__chat-other-user__time"},r.getHours()+"."+r.getMinutes()))))})})(),n.a.createElement("div",{className:"chatRoom__body__bottom",ref:k}))),n.a.createElement("div",{className:"chatRoom__footer",style:{background:a.headerBackground}},n.a.createElement(A.a,{style:{color:o}}),n.a.createElement(W.a,{style:{color:o}}),n.a.createElement("input",{className:"chatRoom__footer__input",style:{background:a.searchInputBackground},value:i,placeholder:"search or start a new chat",onKeyPress:e=>{e.stopPropagation(),e.nativeEvent.stopImmediatePropagation(),e.repeat||"Enter"===e.key&&(w(Object(y.a)(h,i)),Object(f.d)({userId:v,roomId:_._id,text:i}),d(""))},onChange:e=>d(e.target.value)}),n.a.createElement($.a,{style:{color:o}})))},Y=(a(175),a(217));a(3);let q,G=null;const J=e=>{const{children:t,undo:a,showUndoButton:r,showClearButton:c,handleClear:o}=e,{background:s,text:i}=Object(l.a)().palette;return n.a.createElement("div",{className:"NotificationBox",style:{background:s.notificationBackground,color:i.inverseStrong},initial:{y:20,opacity:0},animate:{y:0,opacity:1}},t,r&&n.a.createElement(n.a.Fragment,null,n.a.createElement("span",{className:"ml-4",style:{color:i.notificationHighlight,cursor:"pointer"},onClick:a},"undo")),c&&n.a.createElement(Y.a,{className:"ml-4",style:{cursor:"pointer"},onClick:o}))};var K=e=>{const{updatingDisplayName:t,updatingStatus:a,updatingPhoto:c}=Object(s.c)(e=>e.user),[o,i]=Object(r.useState)(!1),[l,u]=Object(r.useState)(!1),[d,m]=Object(r.useState)(!1),p=Object(r.useRef)(!0),h=Object(r.useRef)(!0),b=Object(r.useRef)(!0),g=Object(E.b)(),_=Object(E.b)(),f=Object(E.b)(),k=Object(s.b)(),[j,v]=Object(r.useState)(!1),[w,O]=Object(r.useState)(!1);Object(r.useLayoutEffect)(()=>{if(p.current)p.current=!1;else{if(!t)return j?(clearInterval(q),void v(!1)):p.current||t?void 0:(i(!0),void(q=setTimeout(()=>{i(!1),B("display-name"),q=null},5e3)));N("display-name")}},[p,t]),Object(r.useLayoutEffect)(()=>{if(h.current)h.current=!1;else{if(!a)return w?(clearInterval(q),void O(!1)):h.current||a?void 0:(u(!0),void(G=setTimeout(()=>{B("status"),u(!1)},5e3)));N("status")}},[h,a]),Object(r.useLayoutEffect)(()=>{if(b.current)b.current=!1;else{if(!c)return b.current||c?void 0:(m(!0),void setTimeout(()=>{B("photo"),m(!1)},5e3));N("photo")}},[b,c]);const N=async e=>{switch(e){case"display-name":await _.start({y:0,opacity:1});break;case"status":await f.start({y:0,opacity:1});break;case"photo":await g.start({y:0,opacity:1})}},B=async e=>{switch(e){case"display-name":await _.start({y:20,opacity:0});break;case"status":await f.start({y:20,opacity:0});break;case"photo":await g.start({y:20,opacity:0})}};return n.a.createElement(E.a.div,{className:"NotificationContainer"},n.a.createElement(E.a.div,{className:"NotificationContainer__NotificationBoxContainer",initial:{y:20,opacity:0},animate:g},(c||d)&&n.a.createElement(J,{showClearButton:d,handleClear:e=>m(!1)},c?"Setting profile photo":"Profile photo set")),n.a.createElement(E.a.div,{className:"NotificationContainer__NotificationBoxContainer",initial:{y:20,opacity:0},animate:_},(t||o)&&n.a.createElement(J,{showUndoButton:o,showClearButton:o,undo:e=>{i(!1),v(!0),k(Object(y.i)("display-name"))},handleClear:e=>i(!1)},o?"Your name changed":"Changing your name")),n.a.createElement(E.a.div,{className:"NotificationContainer__NotificationBoxContainer",initial:{y:20,opacity:0},animate:f},(a||l)&&n.a.createElement(J,{showUndoButton:l,showClearButton:l,undo:e=>{u(!1),O(!0),k(Object(y.i)("status"))},handleClear:e=>u(!1)},l?"About changed":"Changing about...")))},V=(a(176),a(177)),X=a.n(V);var Q=e=>{const t=Object(l.a)(),{borderStronger:a,borderIntro:r}=t.palette.border;return n.a.createElement("div",{className:"Intro"},n.a.createElement("div",{className:"Intro__body"},n.a.createElement(E.a.img,{style:{marginBottom:"20px"},src:"./images/intro-background.jpg"}),n.a.createElement("h2",{style:{marginBottom:"20px"}},"Keep your phone connected"),n.a.createElement("div",{className:"Intro__body__text"},n.a.createElement("p",null,"WhatsApp connects to your phone to sync messages. To reduce data "),n.a.createElement("span",{style:{marginTop:"-15px"}},"usage, connect your phone to Wi-Fi")),n.a.createElement("div",{className:"Intro__body__border",style:{background:a}}),n.a.createElement("span",{className:"Intro__body__extra"},n.a.createElement(X.a,{style:{marginRight:"5px"}}),"WhatsApp available for Windows.",n.a.createElement("span",{style:{marginLeft:"10px"}},"Get it here."))),n.a.createElement("div",{className:"Intro__footer",style:{borderTopColor:r}}))};a(182);t.default=()=>{const e=Object(s.c)(e=>e.system.currentTheme),{email:t,id:a}=Object(s.c)(e=>e.user),{currentChatRoomId:l}=Object(s.c)(e=>e.room),u=Object(I.g)(),d=Object(s.b)(),{chatRooms:m,id:p}=Object(s.c)(e=>e.user);if(Object(r.useEffect)(()=>{d(Object(y.d)()),d(Object(C.b)(-1)),m&&0!==m.length&&m.forEach(e=>{Object(f.c)(e._id)}),Object(w.d)(p,{socketId:f.b.id})},[]),Object(r.useEffect)(()=>{f.b.emit("set-socket-id",{userId:a})},[]),!t)return u.push("/signinsignup"),n.a.createElement(n.a.Fragment,null);const h=Object(o.a)((()=>{switch(e){case"light":return i.b;case"dark":return i.a}})());return n.a.createElement(c.a,{theme:h},n.a.createElement("div",{className:"home",style:{background:h.palette.background.outerBackground,backgroundImage:h.palette.background.outerBackgroundImage}},n.a.createElement("div",{className:"home__header",style:{background:h.palette.background.bannerBackground}}),n.a.createElement("div",{className:"home__body",style:{background:h.palette.background.innerBackground,boxShadow:h.outerBoxShadow}},n.a.createElement(H,null),n.a.createElement(z,null),-1===l&&n.a.createElement(Q,null),n.a.createElement(K,null))))}},53:function(e,t,a){"use strict";var r=a(3),n=a(59);const c=(e,t)=>new Promise((function(a,r){const c={url:e,data:t,onSuccess:e=>{a(e)},onError:e=>{r(e),console.log("api error",e)}};n.d(c.url,c.data,c.onSuccess,c.onError)}));var o=a(56);a.d(t,"h",(function(){return l})),a.d(t,"f",(function(){return u})),a.d(t,"e",(function(){return d})),a.d(t,"d",(function(){return m})),a.d(t,"g",(function(){return p})),a.d(t,"j",(function(){return h})),a.d(t,"i",(function(){return b})),a.d(t,"a",(function(){return g})),a.d(t,"c",(function(){return _})),a.d(t,"b",(function(){return y}));const s=e=>{const t={};return e.forEach(e=>{t[e]=!0}),t},i=(e,t)=>({type:e,payLoad:t}),l=e=>async(t,a)=>{try{if(a().user.isSigningUp)return;t(i(r.f));const o=await(c=e,new Promise((function(e,t){const a={url:"/auth/signup",data:c,onSuccess:t=>{e(t)},onError:e=>{t(e),console.log("api error",e)}};n.f(a.url,a.data,a.onSuccess,a.onError)})));sessionStorage.setItem("accesToken",o.accessToken,{expires:365,path:"/"}),o.friendList=s(o.friendList),t(i(r.o,o))}catch(o){const e=o.response.data.errors,a=[],n=[],c=[];e.forEach(e=>{const t=e.msg.split(" ");switch(t.shift()){case"Display-name":n.push(t.join(" "));break;case"Password":c.push(t.join(" "));break;case"Email":a.push(t.join(" "))}}),t(i(r.k,{emailErrors:a,displayNameErrors:n,passwordErrors:c}))}var c},u=(e,t,a)=>async n=>{try{const s=await(o={email:e,password:t,socketId:a},c("/auth/signin",o));console.log(s.accessToken,"this is it"),sessionStorage.setItem("accesToken",s.accessToken,{expires:365,path:"/"}),n(i(r.o,s))}catch(s){console.log(s),n(i(r.j,"Email or password incorrect"))}var o},d=e=>async t=>{try{if(!e)return void t(i(r.e,[]));t(i(r.i));const a=await o.c(e);t(i(r.e,a))}catch(a){console.log(a)}},m=()=>async(e,t)=>{const a=t().user.id;try{const t=await o.a(a);t.friendList=s(t.friendList),e(i(r.o,t))}catch(n){console.log(n)}},p=()=>async e=>{sessionStorage.removeItem("accesToken",{path:"/"}),e(i(r.o,{displayName:"",profileImage:null,email:"",chatRooms:null,lastSeen:null,accountCreatedAt:"",searchedUsers:[],id:""}))},h=(e,t)=>async(a,n)=>{try{const{id:c,...s}=n().user;switch(e){case"photo":a(i(r.m));break;case"status":a(i(r.n));break;case"display-name":a(i(r.l))}const l=await o.d(c,t);switch(l.prevStatus=s.status||"",l.prevDisplayName=s.displayName||"",a(i(r.o,l)),e){case"photo":a(i(r.r));break;case"status":a(i(r.s));break;case"display-name":a(i(r.q))}}catch(c){console.log(c)}},b=e=>async(t,a)=>{const{prevStatus:r,prevDisplayName:n}=a().user;switch(e){case"display-name":t(h("display-name",{displayName:n}));break;case"status":t(h("status",{status:r}))}},g=(e,t)=>i(r.a,{roomId:e,text:t}),_=()=>i(r.c),y=()=>i(r.b)},56:function(e,t,a){"use strict";a.d(t,"a",(function(){return n})),a.d(t,"c",(function(){return c})),a.d(t,"d",(function(){return o})),a.d(t,"b",(function(){return s}));var r=a(59);const n=e=>i("/users/singleuser/"+e),c=e=>u("/users/search/"+e),o=(e,t)=>l("/users/updateuser/"+e,t),s=e=>i("/users/getidbyemail/"+e),i=e=>new Promise((function(t,a){const n={url:e,onSuccess:e=>{t(e)},onError:e=>{a(e),console.log("api error",e)}};r.b(n.url,n.onSuccess,n.onError)})),l=(e,t)=>new Promise((function(a,n){const c={url:e,data:t,onSuccess:e=>{a(e)},onError:e=>{n(e),console.log("api error",e)}};r.e(c.url,c.data,c.onSuccess,c.onError)}));const u=e=>new Promise((function(t,a){const n={url:e,onSuccess:e=>{t(e)},onError:e=>{a(e),console.log("api error",e)}};r.c(n.url,n.onSuccess,n.onError)}))},59:function(e,t,a){"use strict";a.d(t,"c",(function(){return s})),a.d(t,"b",(function(){return i})),a.d(t,"a",(function(){return l})),a.d(t,"d",(function(){return u})),a.d(t,"f",(function(){return d})),a.d(t,"e",(function(){return m}));var r=a(82),n=a.n(r);function c(){return sessionStorage.getItem("accesToken",{path:"/"})}const o=Object(r.create)({baseURL:"/api"}),s=async(e,t,a)=>{try{window.source&&(window.source.cancel(),window.source=null);const a=n.a.CancelToken;window.source=a.source();const{data:r}=await o({mathod:"get",url:e,responseType:"application/json",cancelToken:window.source.token,headers:{authorization:"bearer "+c()}});t(r)}catch(r){a(r)}},i=async(e,t,a)=>{try{const{data:a}=await o({mathod:"get",url:e,responseType:"application/json",headers:{authorization:"bearer "+c()}});t(a)}catch(r){a(r)}},l=async(e,t,a)=>{try{const{data:a}=await o({mathod:"delete",url:e,responseType:"application/json",headers:{authorization:"bearer "+c()}});t(a)}catch(r){a(r)}},u=async(e,t,a,r)=>{try{const{data:r}=await o({method:"post",url:e,data:t,responseType:"application/json",headers:{authorization:"bearer "+c()}});a(r)}catch(n){r(n)}},d=async(e,t,a,r)=>{try{const{data:r}=await o({method:"post",url:e,data:t,responseType:"application/json"});a(r)}catch(n){r(n)}},m=async(e,t,a,r)=>{try{const{data:r}=await o({method:"put",url:e,data:t,responseType:"application/json",headers:{authorization:"bearer "+c()}});a(r)}catch(n){r(n)}}},60:function(e,t,a){"use strict";a.d(t,"a",(function(){return l})),a.d(t,"c",(function(){return u})),a.d(t,"d",(function(){return d}));var r=a(96),n=a.n(r),c=a(15),o=a(63),s=a(53);a(56);const i=n()("/");i.on("msg-sent",e=>{c.b.dispatch(Object(o.a)(e))}),i.on("room-created",()=>{c.b.dispatch(Object(s.d)())}),i.on("req-join-room",e=>{c.b.dispatch(Object(s.d)()),u(e)});const l=(e,t)=>{i.emit("join-room",{userId:e,user2Id:t})},u=e=>{i.emit("just-join-room",{roomId:e})},d=e=>{let{userId:t,roomId:a,text:r}=e;console.log("this is the socket id",i.id),i.emit("send-msg",{userId:t,roomId:a,text:r,socketId:i.id})};t.b=i},63:function(e,t,a){"use strict";a.d(t,"b",(function(){return c})),a.d(t,"a",(function(){return o}));var r=a(3);const n=(e,t)=>({type:e,payLoad:t}),c=e=>n(r.g,e),o=e=>n(r.d,e)},71:function(e,t,a){"use strict";a.d(t,"b",(function(){return r})),a.d(t,"a",(function(){return n}));const r={palette:{background:{outerBackground:"#dddbd1",outerBackgroundImage:"linear-gradient(180deg,#dddbd1,#d2dbdc)",innerBackground:"#f8f9fa",headerBackground:"#ededed",searchInputBackground:"#fff",searchContainerBackground:"#f6f6f6",siderBarChatListBackground:"#fff",headerColorLight:"#00bfa5",chatListBackgroundActive:"#ebebeb",chatListBackgroundHover:"#f5f5f5",uploadPicOverlayBackground:"hsla(0,0%,40%,0.8)",profileDrawerBackground:"#ededed",headerDarkBackground:"#009688",notificationBackground:"rgba(0,0,0,0.82)",outGoingBackground:"#dcf8c6",incommingBackground:"#fff",systemMessageBackground:"rgba(225,245,254,0.92)",bannerBackground:"#009688",buttonBackground:"#009688",buttonBackgroundHover:"#00bfa5"},icon:{hederIconColor:"#919191",addedUserIconNumber:"#1b9a59",cameraIconColor:"#25d366",arrowIconColor:"#4fc3f7",iconColor:"#919191"},text:{primaryStrong:"#000",inverseStrong:"#fff",notificationHighlight:"#ff0"},border:{borderStronger:"rgba(0,0,0,0.08)",borderIntro:"#4adf83"}},outerBoxShadow:"0 1px 1px 0 rgba(0,0,0,.06),0 2px 5px 0 rgba(0,0,0,.2)"},n={palette:{background:{outerBackground:"black",innerBackground:"black"}}}}}]);
//# sourceMappingURL=5.1828b564.chunk.js.map