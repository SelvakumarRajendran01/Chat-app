{"ast":null,"code":"var _jsxFileName = \"/Users/mohanselva/Desktop/Private_Projects/Chat-app/client/src/containers/Home/index.js\";\nimport React, { useState, useEffect } from \"react\";\nimport { ThemeProvider } from \"@material-ui/core\";\nimport { createMuiTheme, makeStyles } from \"@material-ui/core/styles\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as demoApi from \"../../api/demoAPI\";\nimport { lightTheme, darkTheme } from \"../../utils/theme.js\";\nimport SideBar from \"../../components/SideBar\";\nimport ChatRoom from \"../../components/ChatRoom\";\nimport { useHistory } from \"react-router-dom\";\nimport NotificationContiner from \"../../components/Notification\";\nimport Intro from \"../../components/Intro\";\nimport socket from \"../../utils/socketUtils.js\";\nimport { getUserDetail } from \"../../store/actions/userAction.js\";\nimport { updateUserById } from \"../../api/usersApi.js\";\nimport { setCurrentRoom } from \"../../store/actions/roomAction.js\";\nimport { justJoinRoom } from \"../../utils/socketUtils.js\";\nimport \"./style.css\";\nconst Home = () => {\n  const currentTheme = useSelector(state => state.system.currentTheme);\n  const {\n    email,\n    id\n  } = useSelector(state => state.user);\n  const {\n    currentChatRoomId: currentChatRoom\n  } = useSelector(state => state.room);\n  const history = useHistory();\n  const dispatch = useDispatch();\n  const {\n    chatRooms,\n    id: userId\n  } = useSelector(state => state.user);\n  const joinAllSubscribedRooms = () => {\n    if (!chatRooms || chatRooms.length === 0) {\n      return;\n    }\n    chatRooms.forEach(room => {\n      justJoinRoom(room._id);\n    });\n  };\n  useEffect(() => {\n    dispatch(getUserDetail());\n    dispatch(setCurrentRoom(-1));\n    joinAllSubscribedRooms();\n    updateUserById(userId, {\n      socketId: socket.id\n    });\n  }, []);\n  useEffect(() => {\n    socket.emit(\"set-socket-id\", {\n      userId: id\n    });\n  }, []);\n  if (!email) {\n    history.push(\"/signinsignup\");\n    return /*#__PURE__*/React.createElement(React.Fragment, null);\n  }\n  const getTheme = () => {\n    switch (currentTheme) {\n      case \"light\":\n        return lightTheme;\n      case \"dark\":\n        return darkTheme;\n    }\n  };\n  const appliedTheme = createMuiTheme(getTheme());\n  return /*#__PURE__*/React.createElement(ThemeProvider, {\n    theme: appliedTheme,\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 69,\n      columnNumber: 5\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home\",\n    style: {\n      background: appliedTheme.palette.background.outerBackground,\n      backgroundImage: appliedTheme.palette.background.outerBackgroundImage\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 70,\n      columnNumber: 7\n    }\n  }, /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home__header\",\n    style: {\n      background: appliedTheme.palette.background.bannerBackground\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 74,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(\"div\", {\n    className: \"home__body\",\n    style: {\n      background: appliedTheme.palette.background.innerBackground,\n      boxShadow: appliedTheme.outerBoxShadow\n    },\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 75,\n      columnNumber: 9\n    }\n  }, /*#__PURE__*/React.createElement(SideBar, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 82,\n      columnNumber: 11\n    }\n  }), /*#__PURE__*/React.createElement(ChatRoom, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 83,\n      columnNumber: 11\n    }\n  }), currentChatRoom === -1 && /*#__PURE__*/React.createElement(Intro, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 38\n    }\n  }), /*#__PURE__*/React.createElement(NotificationContiner, {\n    __self: this,\n    __source: {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 11\n    }\n  }))));\n};\nexport default Home;","map":{"version":3,"names":["React","useState","useEffect","ThemeProvider","createMuiTheme","makeStyles","useDispatch","useSelector","demoApi","lightTheme","darkTheme","SideBar","ChatRoom","useHistory","NotificationContiner","Intro","socket","getUserDetail","updateUserById","setCurrentRoom","justJoinRoom","Home","currentTheme","state","system","email","id","user","currentChatRoomId","currentChatRoom","room","history","dispatch","chatRooms","userId","joinAllSubscribedRooms","length","forEach","_id","socketId","emit","push","createElement","Fragment","getTheme","appliedTheme","theme","__self","__source","fileName","_jsxFileName","lineNumber","columnNumber","className","style","background","palette","outerBackground","backgroundImage","outerBackgroundImage","bannerBackground","innerBackground","boxShadow","outerBoxShadow"],"sources":["/Users/mohanselva/Desktop/Private_Projects/Chat-app/client/src/containers/Home/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { ThemeProvider } from \"@material-ui/core\";\nimport { createMuiTheme, makeStyles } from \"@material-ui/core/styles\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport * as demoApi from \"../../api/demoAPI\";\nimport { lightTheme, darkTheme } from \"../../utils/theme.js\";\nimport SideBar from \"../../components/SideBar\";\nimport ChatRoom from \"../../components/ChatRoom\";\nimport {useHistory} from \"react-router-dom\";\nimport NotificationContiner from \"../../components/Notification\";\nimport Intro from \"../../components/Intro\";\nimport socket from \"../../utils/socketUtils.js\";\nimport {getUserDetail} from \"../../store/actions/userAction.js\";\nimport {updateUserById} from \"../../api/usersApi.js\";\nimport {setCurrentRoom} from \"../../store/actions/roomAction.js\";\nimport {justJoinRoom} from \"../../utils/socketUtils.js\";\n\nimport \"./style.css\";\n\nconst Home = () => {\n  const currentTheme = useSelector((state) => state.system.currentTheme);\n  const {email,id} = useSelector(state => state.user);\n  const {currentChatRoomId:currentChatRoom} = useSelector(state => state.room);\n  const history = useHistory();\n\n  const dispatch = useDispatch();\n  const {chatRooms, id:userId }= useSelector(state => state.user);\n\n  const joinAllSubscribedRooms = () => {\n    if(!chatRooms || chatRooms.length === 0)\n      {\n        return;\n      }\n      chatRooms.forEach(room => {\n        justJoinRoom(room._id);\n      });\n  }\n\n  useEffect(() => {\n    dispatch(getUserDetail());\n    dispatch(setCurrentRoom(-1));\n    joinAllSubscribedRooms();\n    updateUserById(userId, {socketId:socket.id});\n  },[]);\n\n\n  useEffect(() => {\n    socket.emit(\"set-socket-id\", {userId:id})\n  },[]);\n  \n  if(!email)\n    {\n      history.push(\"/signinsignup\");\n      return (<></>);\n    }\n\n  const getTheme = () => {\n    switch (currentTheme) {\n      case \"light\":\n        return lightTheme;\n      case \"dark\":\n        return darkTheme;\n    }\n  };\n\n  const appliedTheme = createMuiTheme(getTheme());\n\n  return (\n    <ThemeProvider theme={appliedTheme}>\n      <div\n        className=\"home\"\n        style={{ background: appliedTheme.palette.background.outerBackground, backgroundImage:appliedTheme.palette.background.outerBackgroundImage}}\n      >\n          <div className=\"home__header\" style={{background: appliedTheme.palette.background.bannerBackground}} />\n        <div\n          className=\"home__body\"\n          style={{\n            background: appliedTheme.palette.background.innerBackground,\n            boxShadow:appliedTheme.outerBoxShadow,\n          }}\n        >\n          <SideBar  />\n          <ChatRoom />\n          {currentChatRoom === -1 && <Intro />}\n          <NotificationContiner />\n        </div>\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default Home;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}