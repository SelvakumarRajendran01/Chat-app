{"ast":null,"code":"import React,{useState,useEffect}from\"react\";import{useHistory}from\"react-router-dom\";import\"./index.scss\";import SignUp from\"../../components/Signup\";import Signin from\"../../components/Signin\";import{useDispatch,useSelector}from\"react-redux\";import{signUpAsync,signInAsync,clearSignUpErrors,clearSignInErrors}from\"../../store/actions/userAction\";import socket from\"../../utils/socketUtils.js\";import{ThemeProvider}from\"@material-ui/core\";import{lightTheme,darkTheme}from\"../../utils/theme.js\";import{createMuiTheme,makeStyles}from\"@material-ui/core/styles\";const Login=props=>{const[toggle,setToggle]=useState(true);const dispatch=useDispatch();const{email:userExist,signUpErrors,signInErrors}=useSelector(state=>state.user);const history=useHistory();const[isSigninPage,setIsSignInPage]=useState(true);const currentTheme=useSelector(state=>state.system.currentTheme);const handleLogin=e=>{e.preventDefault();const{email,password}=e.target.elements;dispatch(signInAsync(email.value,password.value,socket.id));};useEffect(()=>{dispatch(clearSignUpErrors());dispatch(clearSignInErrors());},[]);const getTheme=()=>{switch(currentTheme){case\"light\":return lightTheme;case\"dark\":return darkTheme;}};const appliedTheme=createMuiTheme(getTheme());const handleSignUp=async event=>{event.preventDefault();const{displayName,email,password,profileImageInput,confirmPassword}=event.target.elements;// Password confirmation check\nif(password.value!==confirmPassword.value){console.log(\"Passwords do not match\");return;}const Data={displayName:displayName.value,email:email.value,password:password.value,profilePic:profileImageInput.files[0]||null,socketId:socket.id};// Dispatch the action\ndispatch(signUpAsync(Data));};if(userExist){history.push(\"/\");return/*#__PURE__*/React.createElement(React.Fragment,null);}return/*#__PURE__*/React.createElement(ThemeProvider,{theme:appliedTheme},/*#__PURE__*/React.createElement(\"div\",null,isSigninPage?/*#__PURE__*/React.createElement(Signin,{onSubmit:handleLogin,onChangePage:()=>setIsSignInPage(false),errors:signInErrors}):/*#__PURE__*/React.createElement(SignUp,{onSubmit:handleSignUp,onChangePage:()=>setIsSignInPage(true),errors:{...signUpErrors}})));};export default Login;","map":{"version":3,"names":["React","useState","useEffect","useHistory","SignUp","Signin","useDispatch","useSelector","signUpAsync","signInAsync","clearSignUpErrors","clearSignInErrors","socket","ThemeProvider","lightTheme","darkTheme","createMuiTheme","makeStyles","Login","props","toggle","setToggle","dispatch","email","userExist","signUpErrors","signInErrors","state","user","history","isSigninPage","setIsSignInPage","currentTheme","system","handleLogin","e","preventDefault","password","target","elements","value","id","getTheme","appliedTheme","handleSignUp","event","displayName","profileImageInput","confirmPassword","console","log","Data","profilePic","files","socketId","push","createElement","Fragment","theme","onSubmit","onChangePage","errors"],"sources":["/Users/mohanselva/Desktop/Private_Projects/Chat-app/client/src/containers/Login/index.js"],"sourcesContent":["import React, { useState, useEffect } from \"react\";\nimport { useHistory } from \"react-router-dom\";\nimport \"./index.scss\";\nimport SignUp from \"../../components/Signup\";\nimport Signin from \"../../components/Signin\";\nimport { useDispatch, useSelector } from \"react-redux\";\nimport {\n  signUpAsync,\n  signInAsync,\n  clearSignUpErrors,\n  clearSignInErrors,\n} from \"../../store/actions/userAction\";\nimport socket from \"../../utils/socketUtils.js\";\nimport { ThemeProvider } from \"@material-ui/core\";\nimport { lightTheme, darkTheme } from \"../../utils/theme.js\";\nimport { createMuiTheme, makeStyles } from \"@material-ui/core/styles\";\n\nconst Login = (props) => {\n  const [toggle, setToggle] = useState(true);\n  const dispatch = useDispatch();\n  const {\n    email: userExist,\n    signUpErrors,\n    signInErrors,\n  } = useSelector((state) => state.user);\n  const history = useHistory();\n  const [isSigninPage, setIsSignInPage] = useState(true);\n  const currentTheme = useSelector((state) => state.system.currentTheme);\n\n  const handleLogin = (e) => {\n    e.preventDefault();\n    const { email, password } = e.target.elements;\n    dispatch(signInAsync(email.value, password.value, socket.id));\n  };\n\n  useEffect(() => {\n    dispatch(clearSignUpErrors());\n    dispatch(clearSignInErrors());\n  }, []);\n\n  const getTheme = () => {\n    switch (currentTheme) {\n      case \"light\":\n        return lightTheme;\n      case \"dark\":\n        return darkTheme;\n    }\n  };\n\n  const appliedTheme = createMuiTheme(getTheme());\n\n  const handleSignUp = async (event) => {\n    event.preventDefault();\n\n    const { displayName, email, password, profileImageInput, confirmPassword } =\n      event.target.elements;\n\n    // Password confirmation check\n    if (password.value !== confirmPassword.value) {\n      console.log(\"Passwords do not match\");\n      return;\n    }\n    const Data = {\n      displayName: displayName.value,\n      email: email.value,\n      password: password.value,\n      profilePic: profileImageInput.files[0] || null,\n      socketId: socket.id,\n    };\n\n    // Dispatch the action\n    dispatch(signUpAsync(Data));\n  };\n\n  if (userExist) {\n    history.push(\"/\");\n    return <></>;\n  }\n\n  return (\n    <ThemeProvider theme={appliedTheme}>\n      <div>\n        {isSigninPage ? (\n          <Signin\n            onSubmit={handleLogin}\n            onChangePage={() => setIsSignInPage(false)}\n            errors={signInErrors}\n          />\n        ) : (\n          <SignUp\n            onSubmit={handleSignUp}\n            onChangePage={() => setIsSignInPage(true)}\n            errors={{ ...signUpErrors }}\n          />\n        )}\n      </div>\n    </ThemeProvider>\n  );\n};\n\nexport default Login;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module"}