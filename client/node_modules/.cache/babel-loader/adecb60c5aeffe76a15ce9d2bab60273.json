{"ast":null,"code":"import io from\"socket.io-client\";import{store}from\"../store\";import{getNewChatFromSocket}from\"../store/actions/roomAction.js\";import{getUserDetail}from\"../store/actions/userAction.js\";import{updateUserById}from\"../api/usersApi.js\";export const socket=io(\"/\");socket.on(\"msg-sent\",data=>{store.dispatch(getNewChatFromSocket(data));});socket.on(\"room-created\",()=>{store.dispatch(getUserDetail());});socket.on(\"req-join-room\",roomId=>{store.dispatch(getUserDetail());justJoinRoom(roomId);});export const createRoomAndJoinSocket=(userId,user2Id)=>{socket.emit(\"join-room\",{userId,user2Id});};export const justJoinRoom=roomId=>{socket.emit(\"just-join-room\",{roomId});};export const sendMessageSocket=_ref=>{let{userId,roomId,text}=_ref;console.log(\"this is the socket id\",socket.id);socket.emit(\"send-msg\",{userId,roomId,text,socketId:socket.id});};export default socket;","map":{"version":3,"names":["io","store","getNewChatFromSocket","getUserDetail","updateUserById","socket","on","data","dispatch","roomId","justJoinRoom","createRoomAndJoinSocket","userId","user2Id","emit","sendMessageSocket","_ref","text","console","log","id","socketId"],"sources":["/Users/mohanselva/Desktop/Private_Projects/Chat-app/client/src/utils/socketUtils.js"],"sourcesContent":["import io from \"socket.io-client\";\nimport { store } from \"../store\";\nimport { getNewChatFromSocket } from \"../store/actions/roomAction.js\";\nimport { getUserDetail } from \"../store/actions/userAction.js\";\nimport { updateUserById } from \"../api/usersApi.js\";\n\nexport const socket = io(\"/\");\n\nsocket.on(\"msg-sent\", (data) => {\n  store.dispatch(getNewChatFromSocket(data));\n});\n\nsocket.on(\"room-created\", () => {\n  store.dispatch(getUserDetail());\n});\n\nsocket.on(\"req-join-room\", (roomId) => {\n  store.dispatch(getUserDetail());\n  justJoinRoom(roomId);\n});\n\nexport const createRoomAndJoinSocket = (userId, user2Id) => {\n  socket.emit(\"join-room\", { userId, user2Id });\n};\n\nexport const justJoinRoom = (roomId) => {\n  socket.emit(\"just-join-room\", { roomId });\n};\n\nexport const sendMessageSocket = ({ userId, roomId, text }) => {\n  console.log(\"this is the socket id\", socket.id);\n  socket.emit(\"send-msg\", { userId, roomId, text, socketId: socket.id });\n};\n\nexport default socket;\n"],"mappings":"AAAA,MAAO,CAAAA,EAAE,KAAM,kBAAkB,CACjC,OAASC,KAAK,KAAQ,UAAU,CAChC,OAASC,oBAAoB,KAAQ,gCAAgC,CACrE,OAASC,aAAa,KAAQ,gCAAgC,CAC9D,OAASC,cAAc,KAAQ,oBAAoB,CAEnD,MAAO,MAAM,CAAAC,MAAM,CAAGL,EAAE,CAAC,GAAG,CAAC,CAE7BK,MAAM,CAACC,EAAE,CAAC,UAAU,CAAGC,IAAI,EAAK,CAC9BN,KAAK,CAACO,QAAQ,CAACN,oBAAoB,CAACK,IAAI,CAAC,CAAC,CAC5C,CAAC,CAAC,CAEFF,MAAM,CAACC,EAAE,CAAC,cAAc,CAAE,IAAM,CAC9BL,KAAK,CAACO,QAAQ,CAACL,aAAa,CAAC,CAAC,CAAC,CACjC,CAAC,CAAC,CAEFE,MAAM,CAACC,EAAE,CAAC,eAAe,CAAGG,MAAM,EAAK,CACrCR,KAAK,CAACO,QAAQ,CAACL,aAAa,CAAC,CAAC,CAAC,CAC/BO,YAAY,CAACD,MAAM,CAAC,CACtB,CAAC,CAAC,CAEF,MAAO,MAAM,CAAAE,uBAAuB,CAAGA,CAACC,MAAM,CAAEC,OAAO,GAAK,CAC1DR,MAAM,CAACS,IAAI,CAAC,WAAW,CAAE,CAAEF,MAAM,CAAEC,OAAQ,CAAC,CAAC,CAC/C,CAAC,CAED,MAAO,MAAM,CAAAH,YAAY,CAAID,MAAM,EAAK,CACtCJ,MAAM,CAACS,IAAI,CAAC,gBAAgB,CAAE,CAAEL,MAAO,CAAC,CAAC,CAC3C,CAAC,CAED,MAAO,MAAM,CAAAM,iBAAiB,CAAGC,IAAA,EAA8B,IAA7B,CAAEJ,MAAM,CAAEH,MAAM,CAAEQ,IAAK,CAAC,CAAAD,IAAA,CACxDE,OAAO,CAACC,GAAG,CAAC,uBAAuB,CAAEd,MAAM,CAACe,EAAE,CAAC,CAC/Cf,MAAM,CAACS,IAAI,CAAC,UAAU,CAAE,CAAEF,MAAM,CAAEH,MAAM,CAAEQ,IAAI,CAAEI,QAAQ,CAAEhB,MAAM,CAACe,EAAG,CAAC,CAAC,CACxE,CAAC,CAED,cAAe,CAAAf,MAAM","ignoreList":[]},"metadata":{},"sourceType":"module"}